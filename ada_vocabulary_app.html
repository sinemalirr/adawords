<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SÄ±nav KoÃ§u</title>
<style>
body { font-family: Arial; max-width: 480px; margin: auto; padding: 1rem; }
h1 { text-align: center; }
.quiz-card input { width: 100%; padding: 0.5rem; margin: 0.5rem 0; }
button { padding: 0.5rem 1rem; background: #6a5af9; color: white; border: none; border-radius: 8px; cursor: pointer; }
.progress-bar { height: 10px; background: #eee; border-radius: 5px; margin: 1rem 0; }
.progress { height: 100%; background: #6a5af9; border-radius: 5px; width: 0%; }
.reward-modal { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:flex; align-items:center; justify-content:center; display:none; }
.modal-content { background:white; padding:2rem; border-radius:12px; text-align:center; }
</style>
</head>
<body>

<h1>SÄ±nav KoÃ§u</h1>
<div class="progress-bar"><div class="progress"></div></div>
<div class="quiz-card">
  <h2 id="question">YÃ¼kleniyor...</h2>
  <input type="text" id="answer" placeholder="CevabÄ±nÄ± yaz">
  <button id="submitBtn">GÃ¶nder</button>
</div>

<div class="reward-modal" id="rewardModal">
  <div class="modal-content">
    <h2>Tebrikler! ðŸŽ‰</h2>
    <p>Seriyi tamamladÄ±n!</p>
    <button onclick="closeModal()">Kapat</button>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// --- Firebase AyarlarÄ± ---
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// --- Quiz Verisi ---
let quizzes = [
  {id:1, question:"1 + 1 = ?", answer:"2"},
  {id:2, question:"2 + 2 = ?", answer:"4"},
  {id:3, question:"3 + 3 = ?", answer:"6"}
];

let current = 0;

// --- Cihazlar ArasÄ± Senkron ---
function updateProgressOnFirebase() {
  db.collection("progress").doc("main").set({ current });
}

function getProgressFromFirebase() {
  db.collection("progress").doc("main").onSnapshot(doc => {
    if(doc.exists){
      current = doc.data().current;
      showQuiz();
    }
  });
}

// --- Quiz GÃ¶ster ---
function showQuiz(){
  if(current < quizzes.length){
    document.getElementById("question").innerText = quizzes[current].question;
    document.getElementById("answer").value = "";
    document.querySelector(".progress").style.width = ((current)/quizzes.length*100) + "%";
  } else {
    document.getElementById("rewardModal").style.display = "flex";
    document.querySelector(".progress").style.width = "100%";
  }
}

// --- GÃ¶nder Butonu ---
document.getElementById("submitBtn").addEventListener("click", ()=>{
  let userAnswer = document.getElementById("answer").value.trim();
  if(userAnswer === quizzes[current].answer){
    alert("DoÄŸru!");
  } else {
    alert("YanlÄ±ÅŸ!");
  }
  current++;
  updateProgressOnFirebase();
  showQuiz();
});

function closeModal(){
  document.getElementById("rewardModal").style.display = "none";
}

// BaÅŸlangÄ±Ã§
getProgressFromFirebase();
</script>

</body>
</html>
