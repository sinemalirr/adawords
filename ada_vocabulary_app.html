<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>English Learning Flashcards</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; }
    h1 { text-align: center; }
    .flashcard, .quiz, .fill-blank, .rewards { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 10px; }
    button { margin: 5px; padding: 10px 20px; }
  </style>
</head>
<body>
  <h1>English Learning</h1>

  <div class="flashcard">
    <h2>Flashcard</h2>
    <p id="flashcard-word"></p>
    <button onclick="nextFlashcard()">Next</button>
  </div>

  <div class="quiz">
    <h2>Quiz</h2>
    <p id="quiz-question"></p>
    <div id="quiz-options"></div>
  </div>

  <div class="fill-blank">
    <h2>Fill in the blank</h2>
    <p id="fill-sentence"></p>
    <input type="text" id="fill-answer" placeholder="Type your answer">
    <button onclick="checkFill()">Check</button>
    <p id="fill-feedback"></p>
  </div>

  <div class="rewards">
    <h2>Rewards</h2>
    <div id="rewards"></div>
  </div>

  <script>
    const words = [
      {"word": "apple", "translation": "elma"},
      {"word": "banana", "translation": "muz"},
      {"word": "orange", "translation": "portakal"},
      {"word": "grape", "translation": "Ã¼zÃ¼m"},
      {"word": "pear", "translation": "armut"},
      {"word": "peach", "translation": "ÅŸeftali"}
    ];

    let flashIndex = 0;

    function nextFlashcard() {
      flashIndex = (flashIndex + 1) % words.length;
      document.getElementById('flashcard-word').innerText = words[flashIndex].word + " â†’ " + words[flashIndex].translation;
      markDayActive();
      generateQuiz();
      generateFillBlank();
    }

    function getQuizQuestion() {
      const question = words[Math.floor(Math.random() * words.length)];
      const correct = question.translation;

      const wrongOptions = words
        .filter(w => w.translation !== correct)
        .sort(() => 0.5 - Math.random())
        .slice(0, 3);

      const options = [...wrongOptions.map(w => w.translation), correct]
        .sort(() => 0.5 - Math.random());

      return { question: question.word, options, correct };
    }

    function generateQuiz() {
      const q = getQuizQuestion();
      document.getElementById('quiz-question').innerText = "What is the translation of: " + q.question + "?";
      const optsDiv = document.getElementById('quiz-options');
      optsDiv.innerHTML = '';
      q.options.forEach(opt => {
        const btn = document.createElement('button');
        btn.innerText = opt;
        btn.onclick = () => alert(opt === q.correct ? "Correct!" : "Wrong! Correct: " + q.correct);
        optsDiv.appendChild(btn);
      });
    }

    function getFillBlank() {
      const word = words[Math.floor(Math.random() * words.length)];
      const sentence = `I like to eat ___ every day.`; 
      return { sentence, answer: word.translation };
    }

    function generateFillBlank() {
      const f = getFillBlank();
      document.getElementById('fill-sentence').innerText = f.sentence;
      document.getElementById('fill-answer').value = '';
      document.getElementById('fill-feedback').innerText = '';
      document.getElementById('fill-answer').dataset.answer = f.answer;
    }

    function checkFill() {
      const input = document.getElementById('fill-answer');
      const feedback = document.getElementById('fill-feedback');
      feedback.innerText = input.value.trim().toLowerCase() === input.dataset.answer.toLowerCase() 
        ? "Correct!" 
        : "Wrong! Correct: " + input.dataset.answer;
    }

    // 10 gÃ¼n ve 15 dk kontrolÃ¼
    function markDayActive() {
      const today = new Date().toISOString().slice(0,10);
      const data = JSON.parse(localStorage.getItem("learningDays") || "{}");

      if (!data[today]) data[today] = 0;
      data[today] += 1; // 1 dakika yerine 1 birim olarak artÄ±yor
      localStorage.setItem("learningDays", JSON.stringify(data));

      const activeDays = Object.values(data).filter(minutes => minutes >= 15).length;
      if (activeDays >= 10) showRewards();
    }

    function showRewards() {
      document.getElementById("rewards").innerHTML = `
        <span>ğŸ</span>
        <span>ğŸ‰</span>
        <span>ğŸ†</span>
      `;
    }

    // BaÅŸlangÄ±Ã§
    nextFlashcard();
  </script>
</body>
</html>
