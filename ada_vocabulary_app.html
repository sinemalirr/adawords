<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Learning App</title>
<style>
  body { font-family: Arial, sans-serif; background:#f0f0f0; padding:20px; }
  h1 { text-align:center; }
  .flashcard { width: 200px; height: 120px; perspective: 1000px; margin: 20px auto; cursor:pointer; }
  .card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; }
  .card-inner.flipped { transform: rotateY(180deg); }
  .card-front, .card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display:flex; justify-content:center; align-items:center; font-size:18px; border:1px solid #ccc; border-radius:10px; background:#fff; }
  .card-back { transform: rotateY(180deg); background:#ddd; }
  .section { margin:30px 0; }
  button { margin-top:10px; padding:5px 10px; }
  .hidden { display:none; }
</style>
</head>
<body>

<h1>English Learning App</h1>

<div class="section" id="content-entry">
  <h2>Enter Your Words (Anonymously)</h2>
  <input type="text" id="english" placeholder="English word">
  <input type="text" id="turkish" placeholder="Turkish translation">
  <button onclick="addWord()">Add Word</button>
</div>

<div class="section" id="flashcard-section">
  <h2>Flashcard</h2>
  <div class="flashcard" onclick="flipCard()">
    <div class="card-inner" id="card-inner">
      <div class="card-front" id="card-front">Word</div>
      <div class="card-back" id="card-back">Translation</div>
    </div>
  </div>
  <button onclick="nextCard()">Next Card</button>
</div>

<div class="section" id="quiz-section">
  <h2>Multiple Choice Quiz</h2>
  <div id="quiz-question">Question</div>
  <div id="quiz-options"></div>
  <button onclick="nextQuiz()">Next Question</button>
</div>

<div class="section" id="fill-section">
  <h2>Fill in the Blank</h2>
  <div id="fill-question">Sentence with ___</div>
  <input type="text" id="fill-answer" placeholder="Your answer">
  <button onclick="checkFill()">Check</button>
</div>

<div class="section" id="gifts-section" class="hidden">
  <h2>üéÅ Gifts</h2>
  <div>Gift 1 üéâ</div>
  <div>Gift 2 üéâ</div>
  <div>Gift 3 üéâ</div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
  // --- Firebase Config ---
  const firebaseConfig = {
   apiKey: "AIzaSyAp3ywA8mWCKOH3fA7JACPfx3Ko_7VaD00",
  authDomain: "ada-vocabulary-world.firebaseapp.com",
  projectId: "ada-vocabulary-world",
  storageBucket: "ada-vocabulary-world.firebasestorage.app",
  messagingSenderId: "358916729594",
  appId: "1:358916729594:web:a5da6a37d9bafbf9d47743"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // --- Word Data ---
  let words = [];
  let currentIndex = 0;

  function addWord(){
    const en = document.getElementById('english').value.trim();
    const tr = document.getElementById('turkish').value.trim();
    if(en && tr){
      words.push({en,tr});
      db.ref('words').push({en,tr});
      alert('Word added!');
      document.getElementById('english').value='';
      document.getElementById('turkish').value='';
      if(words.length===1) loadCard();
    }
  }

  function loadCard(){
    if(words.length===0) return;
    document.getElementById('card-front').innerText = words[currentIndex].en;
    document.getElementById('card-back').innerText = words[currentIndex].tr;
  }

  function flipCard(){
    document.getElementById('card-inner').classList.toggle('flipped');
  }

  function nextCard(){
    currentIndex = (currentIndex+1)%words.length;
    loadCard();
    document.getElementById('card-inner').classList.remove('flipped');
  }

  // --- Quiz ---
  let quizIndex = 0;
  function nextQuiz(){
    if(words.length===0) return;
    quizIndex = (quizIndex+1)%words.length;
    const q = words[quizIndex];
    document.getElementById('quiz-question').innerText = `What is the translation of "${q.en}"?`;
    let options = [q.tr];
    while(options.length<4){
      const r = words[Math.floor(Math.random()*words.length)].tr;
      if(!options.includes(r)) options.push(r);
    }
    options = options.sort(()=>Math.random()-0.5);
    let html = '';
    options.forEach(o=>{
      html += `<button onclick="checkQuiz('${o}','${q.tr}')">${o}</button> `;
    });
    document.getElementById('quiz-options').innerHTML = html;
  }

  function checkQuiz(selected, correct){
    if(selected===correct) alert('Correct!');
    else alert(`Wrong! Correct: ${correct}`);
  }

  // --- Fill in the blank ---
  function checkFill(){
    const ans = document.getElementById('fill-answer').value.trim();
    const correct = words[quizIndex].tr;
    if(ans===correct) alert('Correct!');
    else alert(`Wrong! Correct: ${correct}`);
  }

  // --- Gifts ---
  let visitDays = 0;
  let sessionStart = Date.now();

  function checkGifts(){
    const now = Date.now();
    if((now-sessionStart)>=15*60*1000){ // 15 minutes
      visitDays++;
      sessionStart = now;
      db.ref('userProgress').set({days:visitDays});
    }
    if(visitDays>=10){
      document.getElementById('gifts-section').classList.remove('hidden');
    }
  }

  setInterval(checkGifts, 60*1000); // check every minute

  // Load existing words from Firebase
  db.ref('words').once('value').then(snapshot=>{
    snapshot.forEach(child=>{
      words.push(child.val());
    });
    if(words.length>0) loadCard();
  });

</script>
</body>
</html>
