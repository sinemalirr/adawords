<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Vocabulary Quiz</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
    h1 { color: #4B0082; }
    #quiz, #word-list { margin-top: 20px; }
    button { margin-top: 10px; padding: 8px 12px; }
    .word { margin: 5px 0; }
  </style>
</head>
<body>
  <h1>Vocabulary Quiz</h1>

  <div id="word-list">
    <h2>Bugünkü Kelimeler</h2>
    <div id="words"></div>
    <button onclick="startQuiz()">Quiz Başlat</button>
  </div>

  <div id="quiz" style="display:none;">
    <h2>Quiz</h2>
    <div id="quiz-question"></div>
    <input type="text" id="answer" placeholder="Cevap" />
    <button onclick="submitAnswer()">Gönder</button>
    <div id="quiz-result"></div>
  </div>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyAp3ywA8mWCKOH3fA7JACPfx3Ko_7VaD00",
      authDomain: "ada-vocabulary-world.firebaseapp.com",
      projectId: "ada-vocabulary-world",
      storageBucket: "ada-vocabulary-world.firebasestorage.app",
      messagingSenderId: "358916729594",
      appId: "1:358916729594:web:a5da6a37d9bafbf9d47743"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Örnek kelime listesi
    let words = [
      { word: "apple", meaning: "elma" },
      { word: "book", meaning: "kitap" },
      { word: "house", meaning: "ev" },
    ];

    // Bugünkü kelimeleri göster
    const wordsDiv = document.getElementById("words");
    words.forEach(w => {
      const div = document.createElement("div");
      div.className = "word";
      div.textContent = `${w.word} - ${w.meaning}`;
      wordsDiv.appendChild(div);
    });

    // Quiz mantığı
    let currentIndex = 0;
    function startQuiz() {
      document.getElementById("word-list").style.display = "none";
      document.getElementById("quiz").style.display = "block";
      currentIndex = 0;
      showQuestion();
    }

    function showQuestion() {
      if(currentIndex >= words.length) {
        document.getElementById("quiz-result").textContent = "Quiz tamamlandı!";
        saveProgress();
        return;
      }
      document.getElementById("quiz-question").textContent = `Bu kelimenin anlamı nedir: ${words[currentIndex].word}?`;
      document.getElementById("answer").value = "";
      document.getElementById("quiz-result").textContent = "";
    }

    function submitAnswer() {
      const ans = document.getElementById("answer").value.trim().toLowerCase();
      const correct = words[currentIndex].meaning.toLowerCase();
      const resultDiv = document.getElementById("quiz-result");
      if(ans === correct) {
        resultDiv.textContent = "Doğru!";
      } else {
        resultDiv.textContent = `Yanlış! Doğru cevap: ${correct}`;
      }
      currentIndex++;
      setTimeout(showQuestion, 1000);
    }

    // Firebase’e kaydetme
    function saveProgress() {
      const dateKey = new Date().toISOString().split('T')[0];
      db.collection("userProgress").doc(dateKey).set({
        completedWords: words.map(w => w.word),
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      })
      .then(() => console.log("Progress saved!"))
      .catch(err => console.error(err));
    }
  </script>
</body>
</html>
