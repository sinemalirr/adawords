<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sosyal Bilgiler - Flashcard & Taktikler</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F8FAFC; min-height: 100vh; }
        .kart-container { perspective: 1000px; height: 300px; } /* YÃ¼kseklik artÄ±rÄ±ldÄ± */
        .kart {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer; 
        }
        .kart.cevir { transform: rotateY(180deg); }
        .kart-yuz, .kart-arka {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            overflow-y: auto; /* Ä°Ã§erik taÅŸarsa kaydÄ±rma Ã§ubuÄŸu */
        }
        .kart-yuz { background-color: #f1f5f9; /* slate-100 */ border: 2px solid #e0e7ff; }
        .kart-arka { 
            background-color: #e0e7ff; /* indigo-100 */
            transform: rotateY(180deg); 
            border: 2px solid #c7d2fe;
        }
        .taktik-item { transition: background-color 0.1s; }
        .taktik-item:hover { background-color: #eef2ff; }
        
        /* Liste stilleri */
        .kart-arka ul {
            text-align: left;
            margin-top: 0.5rem;
            padding-left: 1.5rem;
            list-style-type: disc;
        }
    </style>
</head>
<body>

<div class="w-full max-w-5xl mx-auto p-6 md:p-10 mt-8">
    <header class="pb-4 border-b border-gray-200 mb-6">
        <a href="../sosyal.html" class="text-indigo-600 hover:text-indigo-800 text-xl mb-4 inline-block">â† Sosyal Bilgiler Ana MenÃ¼</a>
        <h1 id="page-title" class="text-3xl font-extrabold text-gray-800 tracking-tight"></h1>
        <p id="page-subtitle" class="text-sm text-gray-500 mt-2"></p>
    </header>

    <div id="content-container">

        <!-- Flashcard GÃ¶rÃ¼ntÃ¼leme AlanÄ± -->
        <div id="flashcard-area" class="hidden">
            <h2 id="flashcard-topic-title" class="text-2xl font-semibold mb-6 text-indigo-700 border-b pb-2"></h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Sol Kolon: Konu Listesi -->
                <div id="konu-listesi-container" class="space-y-3 h-96 overflow-y-auto pr-2 md:col-span-1">
                    <!-- Konu ButonlarÄ± buraya eklenecek -->
                </div>

                <!-- SaÄŸ Kolon: Kartlar -->
                <div id="kart-gosterim-alani" class="kart-container md:col-span-2">
                    <div id="kart-gosterim" class="kart">
                        <div class="kart-yuz">
                            <h3 class="text-lg font-medium text-gray-700">KartÄ± gÃ¶rmek iÃ§in soldan bir konu seÃ§in.</h3>
                        </div>
                        <div class="kart-arka text-gray-800">
                             <!-- Flashcard iÃ§eriÄŸi buraya gelecek -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Kart Navigasyonu -->
            <div id="navigasyon-btn-container" class="flex justify-center space-x-4 mt-8">
                <button id="kart-onceki" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg transition duration-150" disabled>
                    â† Ã–nceki Kart
                </button>
                <button id="kart-cevir" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg transition duration-150">
                    KartÄ± Ã‡evir â†º
                </button>
                <button id="kart-sonraki" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg transition duration-150" disabled>
                    Sonraki Kart â†’
                </button>
            </div>
        </div>
        
        <!-- Taktik GÃ¶rÃ¼ntÃ¼leme AlanÄ± -->
        <div id="taktik-area" class="space-y-8 hidden">
             <!-- Taktikler buraya yÃ¼klenecek -->
        </div>

    </div>
</div>

<!-- Firebase ve SÃ¼re Takibi -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
<script src="../js/firebase-init.js"></script>
<script src="../js/sure-takip-sosyal.js"></script> 

<!-- ğŸ”¥ VERÄ°LER BURADA ğŸ”¥ -->
<script>
    // ====================================================================
    // SOSYAL BÄ°LGÄ°LER FLASHCARD VERÄ°LERÄ°
    // ====================================================================
    
    const sosyalFlashcards = [
        {
            konu: "1. Birey, Toplum ve Ä°letiÅŸim",
            kartlar: [
                { on: "Ä°letiÅŸim nedir?", arka: "Duygu, dÃ¼ÅŸÃ¼nce veya bilgilerin akla gelebilecek her tÃ¼rlÃ¼ yolla baÅŸkalarÄ±na aktarÄ±lmasÄ± ve paylaÅŸÄ±lmasÄ±dÄ±r. (Yazarak, konuÅŸarak veya beden diliyle)." },
                { on: "Ä°letiÅŸimin gerÃ§ekleÅŸmesi iÃ§in gerekli 3 temel ÅŸart nedir?", arka: "1. En az <span class='font-bold'>iki kiÅŸi</span> olmalÄ±.<br>2. Bu kiÅŸiler <span class='font-bold'>birbirini fark etmeli</span>.<br>3. Ä°letilecek <span class='font-bold'>bir mesaj</span> bulunmalÄ±." },
                { on: "SÃ¶zsÃ¼z Ä°letiÅŸim nedir?", arka: "Beden hareketleri, jest (el-kol) ve mimiklerin (yÃ¼z) kullanÄ±ldÄ±ÄŸÄ± iletiÅŸim tÃ¼rÃ¼dÃ¼r." },
                { on: "Sen Dili nedir?", arka: "Ä°letiÅŸimi olumsuz etkileyen; <span class='font-bold'>suÃ§layÄ±cÄ±, yargÄ±layÄ±cÄ± ve eleÅŸtirici</span> dildir. KiÅŸiliÄŸi hedef alÄ±r, savunmaya geÃ§irir." },
                { on: "Ben Dili nedir?", arka: "Duygu ve dÃ¼ÅŸÃ¼nceleri karÅŸÄ±mÄ±zdakini suÃ§lamadan, <span class='font-bold'>kendi tepkisine odaklanarak</span> ifade etme ÅŸeklidir. (Ã–rn: 'ÃœzÃ¼lÃ¼yorum')." },
                { on: "Etkin Dinleme'nin Ã¶zellikleri nelerdir?", arka: "SÃ¶z kesmemek, <span class='font-bold'>gÃ¶z temasÄ±</span> kurmak, sadece sÃ¶ylenene deÄŸil <span class='font-bold'>beden diline</span> de dikkat etmek, yargÄ±lamamak." },
                { on: "Ã–zel HayatÄ±n GizliliÄŸi hangi Anayasa maddesidir?", arka: "<span class='font-bold'>Anayasa'nÄ±n 20. maddesi</span> ile gÃ¼vence altÄ±na alÄ±nmÄ±ÅŸtÄ±r. Konut dokunulmazlÄ±ÄŸÄ± da bu kapsamdadÄ±r." },
                { on: "Dezenformasyon nedir?", arka: "KiÅŸi ve kurumlarÄ± <span class='font-bold'>bilinÃ§li olarak yanlÄ±ÅŸ bilgilendirme</span> (bilgi Ã§arpÄ±tma) eylemidir." },
                { on: "Tekzip HakkÄ± nedir?", arka: "Bir kiÅŸi ya da kurum hakkÄ±nda gerÃ§eÄŸe aykÄ±rÄ± yayÄ±n yapÄ±ldÄ±ÄŸÄ±nda, bu yayÄ±nÄ± <span class='font-bold'>dÃ¼zeltme</span> hakkÄ±dÄ±r." },
                { on: "RTÃœK'Ã¼n temel gÃ¶revi nedir?", arka: "Radyo ve Televizyon Ãœst Kurulu. AkÄ±llÄ± iÅŸaretler sistemi ile toplumu medyanÄ±n zararlÄ± etkilerinden korur." }
            ]
        },
        {
            konu: "2. Ãœlkemizde NÃ¼fus ve GÃ¶Ã§",
            kartlar: [
                { on: "NÃ¼fus ve Demografi nedir?", arka: "YaÅŸayan insan sayÄ±sÄ±na <span class='font-bold'>nÃ¼fus</span> denir. Bunu inceleyen bilim dalÄ± <span class='font-bold'>Demografi</span>'dir." },
                { on: "OsmanlÄ±'da ilk nÃ¼fus sayÄ±mÄ± (II. Mahmud) amacÄ± ve Ã¶zelliÄŸi?", arka: "AmaÃ§: Askerlik ve vergi iÅŸlerini dÃ¼zenlemek. Ã–zellik: Sadece <span class='font-bold'>erkekler</span> sayÄ±lmÄ±ÅŸtÄ±r." },
                { on: "Modern nÃ¼fus sayÄ±mlarÄ± ne iÃ§in kullanÄ±lÄ±r?", arka: "YaÅŸ, cinsiyet, eÄŸitim gibi demografik Ã¶zellikleri belirleyerek okul, hastane ve yatÄ±rÄ±m planlamasÄ± yapmak iÃ§in kullanÄ±lÄ±r." },
                { on: "YerleÅŸimi etkileyen faktÃ¶rler nelerdir?", arka: "<span class='font-bold'>DoÄŸal FaktÃ¶rler:</span> YeryÃ¼zÃ¼ ÅŸekilleri, iklim.<br><span class='font-bold'>BeÅŸerÃ® FaktÃ¶rler:</span> TarÄ±m, sanayi, ticaret, ulaÅŸÄ±m." },
                { on: "TÃ¼rkiye'de iÃ§ gÃ¶Ã§Ã¼n (kÄ±rdan kente) temel nedenleri?", arka: "TarÄ±mda makineleÅŸme, hÄ±zlÄ± nÃ¼fus artÄ±ÅŸÄ±, mirasla toprak bÃ¶lÃ¼nmesi, kentlerdeki iÅŸ/eÄŸitim imkanlarÄ±." },
                { on: "Ä°Ã§ gÃ¶Ã§Ã¼n olumsuz sonuÃ§larÄ± nelerdir?", arka: "NÃ¼fus daÄŸÄ±lÄ±mÄ±nda dengesizlik, trafik, iÅŸsizlik, konut sÄ±kÄ±ntÄ±sÄ± (gecekondu), altyapÄ± yetersizliÄŸi." },
                { on: "Seyahat Ã–zgÃ¼rlÃ¼ÄŸÃ¼ hangi durumlarda kÄ±sÄ±tlanabilir?", arka: "SuÃ§ soruÅŸturmasÄ±, suÃ§ Ã¶nleme, kamu mallarÄ±nÄ± koruma, saÄŸlÄ±klÄ± kentleÅŸme gibi nedenlerle <span class='font-bold'>kanunla</span> sÄ±nÄ±rlanabilir." }
            ]
        },
        {
            konu: "3. Ekonomi, EÄŸitim ve Sosyal KuruluÅŸlar",
            kartlar: [
                { on: "Ahilik ve Lonca teÅŸkilatlarÄ±nÄ±n gÃ¶revleri?", arka: "Meslek erbabÄ± yetiÅŸtirmek, <span class='font-bold'>kalite ve fiyat kontrolÃ¼</span> (narh), haksÄ±z rekabeti Ã¶nlemek." },
                { on: "Lonca teÅŸkilatÄ±nda devletle iliÅŸkiyi kim saÄŸlar?", arka: "<span class='font-bold'>KethÃ¼da</span>. (AyrÄ±ca YiÄŸitbaÅŸÄ± iÃ§ iÅŸlere bakar)." },
                { on: "Ahi ahlakÄ±: 'Eli, kapÄ±sÄ±, sofrasÄ± aÃ§Ä±k olmak' ne demektir?", arka: "CÃ¶mertlik, misafirperverlik ve yardÄ±mseverlik." },
                { on: "VakÄ±flarÄ±n sosyal rolleri nelerdir?", arka: "AÅŸevleri (imarethane), medreseler, darÃ¼ÅŸÅŸifalar (hastane), yol ve kÃ¶prÃ¼ler yaparak halka hizmet etmek." },
                { on: "TÄ±mar Sisteminin faydalarÄ± nelerdir?", arka: "Devlet kasasÄ±ndan para Ã§Ä±kmadan asker (cebelÃ¼) yetiÅŸtirilmesi, tarÄ±msal Ã¼retimin sÃ¼rekliliÄŸi, gÃ¼venliÄŸin saÄŸlanmasÄ±." },
                { on: "Enderun Mektebi'nin amacÄ± nedir?", arka: "Devlet hizmetlerinde Ã§alÄ±ÅŸacak <span class='font-bold'>yÃ¶netici, komutan ve memur</span> yetiÅŸtirmek." }
            ]
        },
        {
            konu: "4. YÃ¶netim ve Demokrasi",
            kartlar: [
                { on: "Hukuk Devleti ilkesinin gÃ¼vencesi nedir?", arka: "VatandaÅŸÄ±n can ve mal gÃ¼venliÄŸini saÄŸlar. <span class='font-bold'>YÃ¶neticiler dahil herkes hukuk kurallarÄ±na uymak zorundadÄ±r</span>." },
                { on: "Sosyal Devlet anlayÄ±ÅŸÄ± nedir?", arka: "Devletin vatandaÅŸÄ±na <span class='font-bold'>eÅŸit hizmet</span> gÃ¶tÃ¼rmesidir. (Ã–rn: Ãœcretsiz eÄŸitim/saÄŸlÄ±k, yaÅŸlÄ±lÄ±k maaÅŸÄ±, yeÅŸil kart)." },
                { on: "Laik Devlet ne demektir?", arka: "Din ve devlet iÅŸlerinin ayrÄ± olmasÄ±dÄ±r. Herkes <span class='font-bold'>vicdan ve ibadet Ã¶zgÃ¼rlÃ¼ÄŸÃ¼ne</span> sahiptir." },
                { on: "Kuvvetler AyrÄ±lÄ±ÄŸÄ± nedir?", arka: "Yasama (TBMM), YÃ¼rÃ¼tme (CumhurbaÅŸkanÄ±) ve YargÄ± (Mahkemeler) gÃ¼Ã§lerinin ayrÄ± organlarda olmasÄ±dÄ±r." },
                { on: "Sivil Toplum KuruluÅŸlarÄ± (STK) ne yapar?", arka: "GÃ¶nÃ¼llÃ¼ Ã¶rgÃ¼tlerdir. Kamuoyu oluÅŸturur, toplumsal sorunlara Ã§Ã¶zÃ¼m arar." },
                { on: "Okullardaki demokratik uygulamalar nelerdir?", arka: "Ã–ÄŸrenci kulÃ¼bÃ¼ seÃ§imleri, sÄ±nÄ±f baÅŸkanÄ± seÃ§imi." }
            ]
        },
        {
            konu: "5. Bilim, Tarih ve UygarlÄ±k",
            kartlar: [
                { on: "YazÄ±yÄ± kim icat etti ve Ã¶nemi nedir?", arka: "<span class='font-bold'>SÃ¼merler</span> (Ã‡ivi yazÄ±sÄ±). Bilgi <span class='font-bold'>kaydedilebilir, korunabilir ve aktarÄ±labilir</span> hale geldi." },
                { on: "YazÄ±nÄ±n geliÅŸimi nasÄ±ldÄ±r?", arka: "MÄ±sÄ±rlÄ±lar: <span class='font-bold'>Hiyeroglif</span> (Resim yazÄ±sÄ±).<br>Fenikeliler: <span class='font-bold'>Alfabe</span> (Harf yazÄ±sÄ±)." },
                { on: "Bilimsel geliÅŸme iÃ§in ne ÅŸarttÄ±r?", arka: "<span class='font-bold'>DÃ¼ÅŸÃ¼nce Ã¶zgÃ¼rlÃ¼ÄŸÃ¼</span>. Ã–zgÃ¼r dÃ¼ÅŸÃ¼ncenin olmadÄ±ÄŸÄ± yerde bilim geliÅŸmez." },
                { on: "Ä°catlar nasÄ±l ortaya Ã§Ä±kar?", arka: "Genellikle <span class='font-bold'>bir ihtiyaÃ§ sonucunda</span> ortaya Ã§Ä±kar. (Ã–rn: Nil nehrinin taÅŸmasÄ± -> Takvim/Geometri)." },
                { on: "MatbaanÄ±n icadÄ±nÄ±n sonuÃ§larÄ±?", arka: "Kitaplar ucuzladÄ±, bilgiye ulaÅŸÄ±m kolaylaÅŸtÄ±, bilimsel geliÅŸmeler hÄ±zlandÄ±." },
                { on: "Engizisyon Mahkemeleri nedir?", arka: "Orta Ã‡aÄŸ'da Kilisenin gÃ¼cÃ¼nÃ¼ korumak ve karÅŸÄ±t dÃ¼ÅŸÃ¼nceleri yargÄ±lamak iÃ§in kurduÄŸu mahkemeler." },
                { on: "Kral Yolu'nun Ã¶nemi?", arka: "Anadolu ile Mezopotamya'yÄ± baÄŸlayan ticaret yolu. KÃ¼ltÃ¼rel etkileÅŸimi ve ticareti artÄ±rdÄ±." },
                { on: "Sanayi Ä°nkÄ±labÄ± nerede baÅŸladÄ± ve Ã¶zelliÄŸi nedir?", arka: "Ä°ngiltere'de. <span class='font-bold'>Buhar gÃ¼cÃ¼yle Ã§alÄ±ÅŸan makineler</span> ile seri Ã¼retime geÃ§ildi." },
                { on: "Sanayi Ä°nkÄ±labÄ±'nÄ±n olumsuz sonuÃ§larÄ±?", arka: "KÃ¶yden kente gÃ¶Ã§, Ã§arpÄ±k kentleÅŸme, Ã§evre kirliliÄŸi, iÅŸÃ§i sÄ±nÄ±fÄ± sorunlarÄ±." }
            ]
        }
    ];

    // SOSYAL BÄ°LGÄ°LER Ã‡Ã–ZÃœM TAKTÄ°KLERÄ°
    const sosyalTaktikler = [
        {
            konu: "1. Soru Ã‡Ã¶zÃ¼m Stratejileri",
            taktikler: [
                { baslik: "Paragraf SorularÄ±", aciklama: "Ã–nce <span class='font-bold'>soru kÃ¶kÃ¼nÃ¼</span> okuyun. 'DeÄŸinilmemiÅŸtir', 'UlaÅŸÄ±lamaz' gibi olumsuz ifadelere dikkat edin. Paragrafta olmayan bilgiyi (kendi yorumunuzu) katmayÄ±n." },
                { baslik: "Kronoloji SorularÄ±", aciklama: "Tarihsel olaylarda <span class='font-bold'>sebep-sonuÃ§</span> iliÅŸkisine bakÄ±n. Bir olayÄ±n sonucu, diÄŸerinin sebebidir." },
                { baslik: "Kavram Bilgisi", aciklama: "Sorularda sÄ±k geÃ§en 'Egemenlik', 'TeÅŸkilatlanma', 'Jeopolitik' gibi kavramlarÄ±n tam anlamÄ±nÄ± bilmek soruyu yarÄ± yarÄ±ya Ã§Ã¶zdÃ¼rÃ¼r." }
            ]
        },
        {
            konu: "2. Harita ve Tablo Yorumlama",
            taktikler: [
                { baslik: "Harita Okuma", aciklama: "Mutlaka haritanÄ±n kÃ¶ÅŸesindeki <span class='font-bold'>Lejant</span> (iÅŸaretler) kÄ±smÄ±na bakÄ±n. Haritada verilmeyen bilgiyi (Ã¶rn: iklim haritasÄ±ndan nÃ¼fusu) Ã§Ä±karmayÄ±n." },
                { baslik: "Grafik Yorumlama", aciklama: "Grafikteki artÄ±ÅŸ ve azalÄ±ÅŸlara dikkat edin. 'YalnÄ±zca bu grafiÄŸe gÃ¶re' deniliyorsa, genel kÃ¼ltÃ¼r bilginizi kullanmayÄ±n, sadece grafiÄŸi okuyun." }
            ]
        }
    ];
</script>

<!-- Flashcard/Taktik Uygulama Scripti -->
<script>
    // URL Parametre Okuyucu
    function getUrlParameter(name) {
        name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
        var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
        var results = regex.exec(location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    };

    // DOM Elementleri
    const pageTitle = document.getElementById('page-title');
    const pageSubtitle = document.getElementById('page-subtitle');
    const flashcardArea = document.getElementById('flashcard-area');
    const taktikArea = document.getElementById('taktik-area');
    const konuListesiContainer = document.getElementById('konu-listesi-container');
    const flashcardTopicTitle = document.getElementById('flashcard-topic-title');
    const kartGosterim = document.getElementById('kart-gosterim');
    const kartYuz = kartGosterim.querySelector('.kart-yuz');
    const kartArka = kartGosterim.querySelector('.kart-arka');
    const kartCevirBtn = document.getElementById('kart-cevir');
    const kartOncekiBtn = document.getElementById('kart-onceki');
    const kartSonrakiBtn = document.getElementById('kart-sonraki');

    // Global Durum
    let currentData = []; 
    let currentTopicIndex = -1;
    let currentCardIndex = 0;
    let isFlipped = false;

    // --- FLASHCARD/TAKTÄ°K GÃ–RÃœNTÃœLEME Ä°ÅLEVLERÄ° ---

    function displayFlashcard(topicIndex, cardIndex) {
        if (topicIndex === -1) return;
        
        currentTopicIndex = topicIndex;
        currentCardIndex = cardIndex;
        isFlipped = false;
        kartGosterim.classList.remove('cevir');
        
        const topic = currentData[currentTopicIndex]; 
        const cardArrayName = (getUrlParameter('tur') === 'flashcard' ? 'kartlar' : 'taktikler');
        const card = topic[cardArrayName][currentCardIndex];
        
        flashcardTopicTitle.textContent = `${topic.konu} (${currentCardIndex + 1} / ${topic[cardArrayName].length})`;
        
        // KartÄ±n Ã–n YÃ¼zÃ¼
        const onYuzMetni = card.on || card.baslik; 
        kartYuz.innerHTML = `
            <p class="text-xl font-bold text-gray-800 whitespace-pre-line px-4">${onYuzMetni}</p> 
            <p class="text-sm mt-4 text-indigo-500 font-semibold uppercase tracking-wider">${getUrlParameter('tur') === 'flashcard' ? 'Kavram / Soru' : 'Taktik BaÅŸlÄ±ÄŸÄ±'}</p>
        `; 

        // KartÄ±n Arka YÃ¼zÃ¼
        const arkaYuzMetni = card.arka || card.aciklama; 
        kartArka.innerHTML = `
            <div class="overflow-y-auto max-h-60 w-full px-6 py-2">
                <p class="text-lg font-medium text-gray-800 leading-relaxed">${arkaYuzMetni}</p>
            </div>
            <p class="text-sm mt-4 text-indigo-600 font-semibold uppercase tracking-wider">AÃ§Ä±klama / Cevap</p>
        `; 
        
        updateNavigationButtons();
    }
    
    function updateNavigationButtons() {
        const cardArrayName = (getUrlParameter('tur') === 'flashcard' ? 'kartlar' : 'taktikler');
        if (currentTopicIndex === -1 || !currentData[currentTopicIndex] || !currentData[currentTopicIndex][cardArrayName]) {
             kartOncekiBtn.disabled = true;
             kartSonrakiBtn.disabled = true;
             return;
        }

        const totalCards = currentData[currentTopicIndex][cardArrayName].length;
        
        kartOncekiBtn.disabled = currentCardIndex === 0;
        kartSonrakiBtn.disabled = currentCardIndex === totalCards - 1;
        
        // Buton opaklÄ±klarÄ±nÄ± ayarla
        kartOncekiBtn.style.opacity = currentCardIndex === 0 ? '0.5' : '1';
        kartSonrakiBtn.style.opacity = currentCardIndex === totalCards - 1 ? '0.5' : '1';
    }

    // --- SAYFA BAÅLATMA ---
    function initialize() {
        const tur = getUrlParameter('tur');
        konuListesiContainer.innerHTML = '';
        
        if (tur === 'flashcard') {
            currentData = sosyalFlashcards; 
            pageTitle.textContent = 'Sosyal Bilgiler Kavram KartlarÄ± ğŸ›ï¸';
            pageSubtitle.textContent = 'Ã–nemli olaylarÄ±, terimleri ve tanÄ±mlarÄ± Ã¶ÄŸrenin.';
            flashcardArea.classList.remove('hidden');
            renderKonuListesi(currentData, 'kartlar');
        } else if (tur === 'taktik') {
            currentData = sosyalTaktikler; 
            pageTitle.textContent = 'Sosyal Bilgiler Ã‡Ã¶zÃ¼m Taktikleri ğŸ’¡';
            pageSubtitle.textContent = 'Harita okuma, tablo yorumlama ve soru Ã§Ã¶zme stratejileri.';
            flashcardArea.classList.remove('hidden');
            renderKonuListesi(currentData, 'taktikler'); 
        } else {
            pageTitle.textContent = 'Hata: GeÃ§ersiz ModÃ¼l';
            pageSubtitle.textContent = 'LÃ¼tfen ana menÃ¼den geÃ§erli bir link seÃ§in.';
        }
    }

    function renderKonuListesi(data, cardArrayName) {
        konuListesiContainer.innerHTML = '';
        
        data.forEach((topic, topicIndex) => {
            const button = document.createElement('button');
            button.className = 'w-full text-left p-4 bg-white border-l-4 border-indigo-200 rounded-r-lg shadow-sm text-gray-700 hover:bg-indigo-50 hover:border-indigo-500 transition duration-150 font-medium mb-2';
            
            const cardCount = topic[cardArrayName] ? topic[cardArrayName].length : 0;
            button.innerHTML = `<span class="block text-sm text-gray-500 mb-1">Ãœnite ${topicIndex + 1}</span>${topic.konu} <span class="float-right bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded-full">${cardCount}</span>`;

            button.onclick = () => {
                displayFlashcard(topicIndex, 0);
                
                // Aktif buton stili
                konuListesiContainer.querySelectorAll('button').forEach(btn => {
                    btn.classList.remove('border-indigo-600', 'bg-indigo-50');
                    btn.classList.add('border-indigo-200', 'bg-white');
                });
                button.classList.remove('border-indigo-200', 'bg-white');
                button.classList.add('border-indigo-600', 'bg-indigo-50');
            };
            konuListesiContainer.appendChild(button);
        });

        // Ä°lk konuyu otomatik seÃ§
        if (data.length > 0) {
            konuListesiContainer.querySelector('button').click();
        }
    }

    // --- NAVÄ°GASYON VE ETKÄ°LEÅÄ°M ---
    
    // KartÄ± Ã§evirme
    const toggleFlip = () => {
        if (currentTopicIndex !== -1) {
            kartGosterim.classList.toggle('cevir');
            isFlipped = !isFlipped;
        }
    };

    kartGosterim.addEventListener('click', toggleFlip);
    kartCevirBtn.addEventListener('click', toggleFlip);

    kartSonrakiBtn.addEventListener('click', () => {
        if (currentTopicIndex !== -1) {
            const cardArrayName = (getUrlParameter('tur') === 'flashcard' ? 'kartlar' : 'taktikler');
            if (currentCardIndex < currentData[currentTopicIndex][cardArrayName].length - 1) {
                displayFlashcard(currentTopicIndex, currentCardIndex + 1);
            }
        }
    });

    kartOncekiBtn.addEventListener('click', () => {
        if (currentCardIndex > 0) {
            displayFlashcard(currentTopicIndex, currentCardIndex - 1);
        }
    });

    // BaÅŸlat
    document.addEventListener('DOMContentLoaded', initialize);
</script>

</body>
</html>
